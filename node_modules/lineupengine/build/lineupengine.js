/*! lineupengine - v1.1.2 - 2018
* https://sgratzl.github.io/lineupengine/
* Copyright (c) 2018 Samuel Gratzl; Licensed MIT*/
!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.lineupengine=e():t.lineupengine=e()}(window,function(){return function(t){var e={};function i(o){if(e[o])return e[o].exports;var n=e[o]={i:o,l:!1,exports:{}};return t[o].call(n.exports,n,n.exports,i),n.l=!0,n.exports}return i.m=t,i.c=e,i.d=function(t,e,o){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(i.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)i.d(o,n,function(e){return t[e]}.bind(null,n));return o},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=2)}([,function(t,e){},function(t,e,i){"use strict";i.r(e);
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)};function n(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}var r=Symbol("aborted");function s(t){return{then:function(e){var i,o=null,n=function(){return null===o},s=new Promise(function(t){return o=t}),a=t.then(function(t){return n()?r:Promise.resolve(e(t)).then(function(t){return n()?r:t})}),l=Promise.race([s,a]);return(i={abort:function(){null!==o&&(o(r),o=null)},then:l.then.bind(l),catch:l.catch.bind(l)})[Symbol.toStringTag]=l[Symbol.toStringTag],i}}}function a(t){return void 0!==t&&null!==t&&t&&"function"==typeof t.then&&"function"==typeof t.abort}var l,h=function(){function t(t,e){var i=this;this.context=t,this.key=e,this.cache=[],this.lastFilled=0,this.key2index=new Map,this.context.exceptions.forEach(function(t){i.cache[t.index]=t.y,i.key2index.set(e(t.index),t.index)})}return t.prototype.findValidStart=function(t){for(var e=t-1;e>=0;--e)if(void 0!==this.cache[e])return e;return-1},t.prototype.posByKey=function(t){if(this.key2index.has(t)){var e=this.key2index.get(t);return{index:e,pos:this.pos(e)}}return this.fillCacheTillKey(t)},t.prototype.pos=function(t){if(0===this.context.exceptions.length)return t*this.context.defaultRowHeight;var e=this.cache[t];if(void 0!==e)return e;var i=this.findValidStart(t);return i<0?this.fillCache(0,t,0):this.fillCache(i+1,t,this.cache[i]+this.heightOf(i)),this.cache[t]},t.prototype.fillCache=function(t,e,i,o){if(e<=this.lastFilled){if(!o)return;for(var n=t;n<=e;++n)o(n,this.key(n),this.cache[n])}else{var r=i;for(n=t;n<=e;++n){this.cache[n]=r;var s=this.key(n);this.key2index.set(s,n),o&&o(n,s,r),r+=this.heightOf(n)}}},t.prototype.heightOf=function(t){var e=this.context.exceptionsLookup;return e.has(t)?e.get(t):this.context.defaultRowHeight},t.prototype.exceptionHeightOf=function(t,e){void 0===e&&(e=!1);var i=this.context.padding(t),o=this.context.exceptionsLookup;return o.has(t)?o.get(t)-i:e?this.context.defaultRowHeight-i:null},t.prototype.padding=function(t){return this.context.padding(t)},t.prototype.fillCacheTillKey=function(t){for(var e=0,i=this.lastFilled;i<this.context.numberOfRows;++i,++this.lastFilled){var o=this.cache[i];if(void 0===o){var n=this.key(i);if(this.cache[i]=e,this.key2index.set(n,i),n===t)return{index:i,pos:e};e+=this.heightOf(i)}else e=o+this.heightOf(i)}return{index:-1,pos:-1}},t.prototype.positions=function(t,e,i,o){this.fillCache(t,e,i,o)},t}();!function(t){t[t.UPDATE=0]="UPDATE",t[t.UPDATE_CREATE=1]="UPDATE_CREATE",t[t.UPDATE_REMOVE=2]="UPDATE_REMOVE",t[t.SHOW=3]="SHOW",t[t.HIDE=4]="HIDE"}(l||(l={}));var c=1;function u(t,e,i){var o=t.previous,n=t.mode,r=t.nodeY,s=t.current,a=null==o.height?e:o.height,h=null==s.height?i:s.height;return n===l.UPDATE&&Math.abs(o.y-r)<=c&&Math.abs(a-h)<=c}var d,f=[{delay:0,apply:function(t){var e=t.mode,i=t.previous,o=t.nodeY,n=t.current,r=t.node;r.dataset.animation=l[e].toLowerCase(),r.style.transform="translate(0, "+(i.y-o)+"px)",e===l.SHOW?r.style.height=null!==n.height?n.height+"px":null:r.style.height=i.height+"px",r.style.opacity=e===l.SHOW?"0":e===l.HIDE?"1":null}},{delay:10,apply:function(t){var e=t.mode,i=t.current,o=t.nodeY,n=t.node;n.style.transform=e===l.HIDE||e===l.UPDATE_REMOVE?"translate(0, "+(i.y-o)+"px)":null,e!==l.HIDE&&(n.style.height=null!==i.height?i.height+"px":null),n.style.opacity=e===l.SHOW?"1":e===l.HIDE?"0":null}},{delay:1100,apply:function(t){var e=t.node;delete e.dataset.animation,e.style.opacity=null,e.style.transform=null}}],p=function(){function t(t,e,i){this.index=t,this.y=e,this.height=i}return Object.defineProperty(t.prototype,"y2",{get:function(){return this.y+this.height},enumerable:!0,configurable:!0}),t}();function m(t,e,i){return void 0===i&&(i=0),{exceptions:[],exceptionsLookup:{keys:function(){return[].values()},get:function(){return e},has:function(){return!1},size:0},totalHeight:t*(e+=i),numberOfRows:t,defaultRowHeight:e,padding:function(){return i}}}function y(t,e,i){void 0===e&&(e=NaN),void 0===i&&(i=0);var o=new Map,n=[],r="function"==typeof i?i:function(){return i};isNaN(e)&&(e=function(t){var e=new Map;if(t.forEach(function(t){e.set(t,(e.get(t)||0)+1)}),0===e.size)return 20;var i=Array.from(e).sort(function(t,e){return t[1]!==e[1]?e[1]-t[1]:t[0]-e[0]}),o=i[0][0];return 0===o?i.length>1?i[1][0]:20:o}(t)),e+=r(-1);var s=-1,a=0,l=0,h=0;return t.forEach(function(t,i){if(t+=r(i),l+=t,h++,t!==e){o.set(i,t);var c=(i-s-1)*e;s=i;var u=a+c;a=u+t,n.push(new p(i,u,t))}}),{exceptionsLookup:o,exceptions:n,totalHeight:l,defaultRowHeight:e,numberOfRows:h,padding:r}}function v(t,e,i,o,n,r){void 0===i&&(i=2),void 0===o&&(o=10*e),void 0===n&&(n=.2),void 0===r&&(r=Date.now());var s=r,a=function(){var t=1e4*Math.sin(s++);return t-Math.floor(t)};return y({forEach:function(r){for(var s=0;s<t;++s)r(a()<n?i+Math.round(a()*(o-i)):e,s)}},e)}function g(t,e,i,o,n){if(0===n)return{first:0,last:-1,firstRowPos:0,endPos:0};if(1===n)return{first:0,last:0,firstRowPos:0,endPos:0===o.length?i:o[0].y2};var r=t,s=r+e;function a(t,e){return Math.min(n-1,e+Math.max(0,Math.floor(t/i)))}function l(t,e,o){void 0===o&&(o=!1);var l=s-t,h=a(r-t,e),c=a(l,e),u=t+(h-e)*i,d=t+(c+1-e)*i;return console.assert(!o||!(u>r||d<s&&c<n-1),"error",o,u,d,r,s,e,t),{first:h,last:c,firstRowPos:u,endPos:d}}var h=l(0,0,!0);if(0===o.length)return h;if(h.last<o[0].index)return h;if(h.last===o[0].index&&o[0].height>i)return Object.assign(h,{endPos:o[0].y2});var c=o[o.length-1];if(r>=c.y){var u=l(c.y2,c.index+1);return r<c.y2?Object.assign(u,{first:c.index,firstRowPos:c.y}):u}for(var d=[],f=o[0],p=0,m=o;p<m.length;p++){var y=m[p],v=y.y,g=y.y2;if(v>=s)break;g<=r?f=y:d.push(y)}if(0===d.length)return l(f.y2,f.index+1);var b=d[0],x=d[d.length-1],w=Math.max(0,b.index-Math.max(0,Math.ceil((b.y-r)/i))),C=x.index;s>=x.y2&&(C=a(s-x.y2,x.index+1));var R=b.y-(b.index-w)*i,O=x.y2+(C-x.index)*i;return console.assert(R<=r&&(O>=s||C===n-1),"error",R,O,r,s,b,x),{first:w,last:C,firstRowPos:R,endPos:O}}function b(t,e){var i=t.length,o=e.length;if(0===i)return{added:e,removed:[],common:0};if(0===o)return{added:[],removed:t,common:0};if(i===o)return{added:[],removed:[],common:i};var n=t.slice(Math.min(o,i));return{added:e.slice(Math.min(o,i)),removed:n,common:i-n.length}}function x(t,e,i){for(var o=0===t.length?0:t[t.length-1]+1,n=[],r=[],s=t.length-1;s>=0;--s){if(!(t[s]>=i))break;r.push(t.pop())}for(s=o;s<i;++s)e[s].frozen&&(n.push(s),t.push(s));return{target:t,added:n,removed:r}}!function(t){t[t.NONE=0]="NONE",t[t.ALL=1]="ALL",t[t.SOME=2]="SOME",t[t.SOME_BOTTOM=3]="SOME_BOTTOM",t[t.SOME_TOP=4]="SOME_TOP"}(d||(d={}));var w="animation",C=function(){function t(t){var e=this;this.node=t,this.handlers=new Map,this.animationWaiting=!1,this.immediateTimeout=-1,this.timersWaiting=new Set,this.prevs=new Map,t.addEventListener("scroll",function(){e.handle("sync"),e.handleAnimation(),e.handleImmediate(),e.handleTimeouts()},{passive:!0})}return t.prototype.has=function(t){return this.handlers.has(t)&&this.handlers.get(t).length>0},t.prototype.handle=function(t){var e=this.handlers.get(t)||[];if(e&&!(e.length<=0)){var i=this.asInfo();if(this.prevs.has(t)){var o=this.prevs.get(t);if(Math.abs(i.left-o.left)+Math.abs(i.top-o.top)<4)return}this.prevs.set(t,i);for(var n=0,r=e;n<r.length;n++){(0,r[n])(i)}}},t.prototype.handleAnimation=function(){var t=this;!this.animationWaiting&&this.has("animation")&&(this.animationWaiting=!0,requestAnimationFrame(function(){t.animationWaiting&&(t.animationWaiting=!1,t.handle("animation"))}))},t.prototype.handleImmediate=function(){var t=this;this.immediateTimeout>=0||!this.has("immediate")||(this.immediateTimeout=self.setImmediate(function(){t.immediateTimeout<0||(t.immediateTimeout=-1,t.handle("immediate"))}))},t.prototype.handleTimeouts=function(){var t=this,e=Array.from(this.handlers.keys()).filter(function(e){return"number"==typeof e&&!t.timersWaiting.has(e)});if(0!==e.length)for(var i=function(e){o.timersWaiting.add(e),self.setTimeout(function(){t.timersWaiting.delete(e),t.handle(e)},e)},o=this,n=0,r=e;n<r.length;n++){i(r[n])}},t.prototype.asInfo=function(){return{left:this.node.scrollLeft,top:this.node.scrollTop,width:this.node.clientWidth,height:this.node.clientHeight}},t.prototype.push=function(t,e){"immediate"===t&&"function"!=typeof self.setImmediate&&(t=0),this.handlers.has(t)?this.handlers.get(t).push(e):this.handlers.set(t,[e])},t.prototype.remove=function(t){return Array.from(this.handlers.values()).some(function(e){var i=e.indexOf(t);return i>=0&&e.splice(i,1),i>=0})},t}();function R(t,e,i){t.__le_scroller__||(t.__le_scroller__=new C(t));var o=t.__le_scroller__;return o.push(e,i),o.asInfo()}var O=function(){function t(t,e){void 0===e&&(e={});var i=this;this.body=t,this.pool=[],this.loadingPool=[],this.loading=new Map,this.visible={first:0,forcedFirst:0,last:-1,forcedLast:-1},this.visibleFirstRowPos=0,this.scrollListener=null,this.abortAnimation=function(){},this.options={async:w,minScrollDelta:10,mixins:[],scrollingHint:!1,batchSize:5},this.adapter=this.createAdapter(),Object.assign(this.options,e),this.mixins=this.options.mixins.map(function(t){return new t(i.adapter)}),this.fragment=t.ownerDocument.createDocumentFragment()}return t.prototype.addMixin=function(t,e){this.mixins.push(new t(this.adapter,e))},t.prototype.createAdapter=function(){var t=this,e={visible:this.visible,addAtBeginning:this.addAtBeginning.bind(this),addAtBottom:this.addAtBottom.bind(this),removeFromBeginning:this.removeFromBeginning.bind(this),removeFromBottom:this.removeFromBottom.bind(this),updateOffset:this.updateOffset.bind(this),scroller:this.bodyScroller};return Object.defineProperties(e,{visibleFirstRowPos:{get:function(){return t.visibleFirstRowPos},enumerable:!0},context:{get:function(){return t.context},enumerable:!0}}),e},Object.defineProperty(t.prototype,"bodyScroller",{get:function(){return this.body.parentElement},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bodySizer",{get:function(){var t=this.bodyScroller,e=Array.from(t.children).find(function(t){return"footer"===t.tagName.toLowerCase()});if(e)return e;var i=t.ownerDocument.createElement("footer");return t.insertBefore(i,t.firstChild),i},enumerable:!0,configurable:!0}),t.prototype.init=function(){var t=this,e=this.bodyScroller,i=R(e,this.options.async,this.scrollListener=function(o){if(!(Math.abs(i.top-o.top)<t.options.minScrollDelta&&Math.abs(i.height-o.height)<t.options.minScrollDelta)){var n=o.top>i.top;i=o,t.onScrolledVertically(o.top,o.height,n),t.options.scrollingHint&&e.classList.remove("le-scrolling")}});this.options.scrollingHint&&R(e,"animation",function(){return e.classList.add("le-scrolling")}),this.recreate()},t.prototype.destroy=function(){!function(t,e){t.__le_scroller__&&t.__le_scroller__.remove(e)}(this.bodyScroller,this.scrollListener),this.body.remove()},t.cleanUp=function(t){t.style.height&&(t.style.height=null)},t.prototype.select=function(t){var e,i;return this.pool.length>0?(e=this.pool.pop(),i=this.updateRow(e,t)):this.loadingPool.length>0?((e=this.loadingPool.pop()).classList.remove("loading"),i=this.createRow(e,t)):(e=this.body.ownerDocument.createElement("div"),i=this.createRow(e,t)),e.dataset.index=String(t),{item:e,result:i}},t.prototype.selectProxy=function(){var t;return this.loadingPool.length>0?t=this.loadingPool.pop():(t=this.body.ownerDocument.createElement("div")).classList.add("loading"),t},t.prototype.recycle=function(e){(t.cleanUp(e),this.loading.has(e))?this.loading.get(e).abort():this.pool.push(e)},t.prototype.proxy=function(e,i){var o=this;if(!a(i))return e;var n=i,s=e,l=this.selectProxy();return l.dataset.index=s.dataset.index,l.style.height=s.style.height,this.loading.set(l,n),n.then(function(e){e===r?(t.cleanUp(s),o.pool.push(s)):o.body.replaceChild(s,l),o.loading.delete(l),t.cleanUp(l),o.loadingPool.push(l)}),l},t.prototype.create=function(t){var e=this.select(t),i=e.item,o=e.result,n=this.context,r=n.exceptionsLookup,s=n.padding;return r.has(t)&&(i.style.height=r.get(t)-s(t)+"px"),this.proxy(i,o)},t.prototype.removeAll=function(){var t=this,e=Array.from(this.body.children);this.body.innerHTML="",e.forEach(function(e){t.recycle(e)})},t.prototype.update=function(){var t=this,e=this.visible.first,i=this.fragment,o=Array.from(this.body.children);this.body.innerHTML="",o.forEach(function(o,n){if(!t.loading.has(o)){var r=t.updateRow(o,n+e);i.appendChild(t.proxy(o,r))}}),this.body.appendChild(i)},t.prototype.forEachRow=function(t,e){var i=this;void 0===e&&(e=!1);var o=Array.from(this.body.children),n=this.fragment;e||(this.body.innerHTML=""),o.forEach(function(o,r){o.classList.contains("loading")||"update_remove"===o.dataset.animation||"hide"===o.dataset.animation||t(o,r+i.visible.first),e||n.appendChild(o)}),e||this.body.appendChild(n)},t.prototype.removeFromBeginning=function(t,e){return this.remove(t,e,!0)},t.prototype.removeFromBottom=function(t,e){return this.remove(t,e,!1)},t.prototype.remove=function(t,e,i){if(!(e<t))for(var o=t;o<=e;++o){var n=i?this.body.firstChild:this.body.lastChild;n.remove(),this.recycle(n)}},t.prototype.addAtBeginning=function(t,e){if(!(e<t))if(t!==e){for(var i=this.fragment,o=t;o<=e;++o)i.appendChild(this.create(o));this.body.insertBefore(i,this.body.firstChild)}else this.body.insertBefore(this.create(t),this.body.firstChild)},t.prototype.addAtBottom=function(t,e){if(!(e<t))if(t!==e){for(var i=this.fragment,o=t;o<=e;++o)i.appendChild(this.create(o));this.body.appendChild(i)}else this.body.appendChild(this.create(t))},t.prototype.updateOffset=function(t){this.visibleFirstRowPos=t,this.body.classList.toggle("odd",this.visible.first%2==1),this.updateSizer(t)},t.prototype.updateSizer=function(t){var e=this.context.totalHeight;this.body.style.transform="translate(0, "+t.toFixed(0)+"px)",this.bodySizer.style.transform="translate(0, "+Math.max(0,e-1).toFixed(0)+"px)"},t.prototype.recreate=function(t){return this.abortAnimation(),t?this.recreateAnimated(t):this.recreatePure()},t.prototype.recreatePure=function(){var t=this.context,e=this.bodyScroller;this.updateOffset(0),this.removeAll(),this.clearPool();var i=g(e.scrollTop,e.clientHeight,t.defaultRowHeight,t.exceptions,t.numberOfRows),o=i.first,n=i.last,r=i.firstRowPos;this.visible.first=this.visible.forcedFirst=o,this.visible.last=this.visible.forcedLast=n,o<0?this.updateOffset(0):(this.addAtBottom(o,n),this.updateOffset(r))},t.prototype.recreateAnimated=function(t){var e=this,i=new Map,o=new h(t.previous,t.previousKey),n=new h(this.context,t.currentKey),r=g(this.bodyScroller.scrollTop,this.bodyScroller.clientHeight,n.context.defaultRowHeight,n.context.exceptions,n.context.numberOfRows),s=Array.from(this.body.children),a=Object.assign({},this.visible);this.body.innerHTML="",o.positions(a.first,Math.min(a.last,a.first+s.length),this.visibleFirstRowPos,function(t,e,o){var n=s[t];n&&i.set(e,{n:n,pos:o,i:t})}),this.visible.first=this.visible.forcedFirst=r.first,this.visible.last=this.visible.forcedLast=r.last;var c=this.fragment,u=[],d=r.firstRowPos;n.positions(r.first,r.last,r.firstRowPos,function(t,r,s){var a,h,f=l.UPDATE;if(i.has(r)){var p=i.get(r);i.delete(r),p.n.dataset.index=String(t),a=e.proxy(p.n,e.updateRow(p.n,t)),h={index:p.i,y:p.pos,height:o.exceptionHeightOf(p.i,!0)}}else{var m=o.posByKey(r);a=e.create(t),f=m.index<0?l.SHOW:l.UPDATE_CREATE,h={index:m.index,y:m.pos>=0?m.pos:s,height:m.index<0?n.exceptionHeightOf(t,!0):o.exceptionHeightOf(m.index,!0)}}u.push({node:a,key:r,mode:f,previous:h,nodeY:d,nodeYCurrentHeight:s,current:{index:t,y:s,height:n.exceptionHeightOf(t)}}),a.style.transform="translate(0, "+(d-s)+"px)",d+=h.height+(h.index<0?n.padding(t):o.padding(h.index)),c.appendChild(a)});var p=r.endPos;i.forEach(function(t,e){var i=n.posByKey(e),r=i.pos>=0?i.pos:t.pos,s=t.n;s.style.transform="translate(0, "+(t.pos-d)+"px)",c.appendChild(s);var a=o.exceptionHeightOf(t.i,!0);u.push({node:t.n,key:e,mode:i.index<0?l.HIDE:l.UPDATE_REMOVE,previous:{index:t.i,y:t.pos,height:a},nodeY:d,nodeYCurrentHeight:p,current:{index:i.index,y:r,height:i.index<0?null:n.exceptionHeightOf(i.index)}}),p+=i.index<0?n.context.defaultRowHeight:n.exceptionHeightOf(i.index,!0)+n.padding(i.index),d+=a+o.padding(t.i)}),this.updateOffset(r.firstRowPos),this.animate(u,t.phases||f,o,n,c)},t.prototype.animate=function(t,e,i,o,n){var r=this;if(t.length<=0)this.body.appendChild(n);else{for(var s=-1,a=0,h=function(e,n){void 0===n&&(n=t),n.forEach(function(t){return e.apply(t,i,o)})},c=function(){if(console.assert(t[0].node.offsetTop>=0,"dummy log for forcing dom update"),h(e[a++]),a<e.length){var i=e[a];s=self.setTimeout(c,i.delay)}else{var o=r.body.classList;Array.from(o).forEach(function(t){t.startsWith("le-")&&t.endsWith("-animation")&&o.remove(t)}),t.forEach(function(t){var e=t.node,i=t.mode;i!==l.UPDATE_REMOVE&&i!==l.HIDE||(e.remove(),e.style.transform=null,r.recycle(e))}),r.abortAnimation=function(){},s=-1}};0===e[a].delay;)h(e[a++]);var d=this.body;this.body.appendChild(n);var f=[];t=t.filter(function(t){return!u(t,i.context.defaultRowHeight,o.context.defaultRowHeight)||(f.push(t),!1)}),f.length>0&&e.slice(a).forEach(function(t){return h(t,f)}),0!==t.length&&(d.classList.add("le-row-animation"),new Set(t.map(function(t){return t.mode})).forEach(function(t){d.classList.add("le-"+l[t].toLowerCase().split("_")[0]+"-animation")}),this.abortAnimation=function(){s<=0||(clearTimeout(s),s=-1,a=e.length-1,c())},s=self.setTimeout(c,e[a].delay))}},t.prototype.clearPool=function(){this.pool.splice(0,this.pool.length)},t.prototype.revalidate=function(){var t=this.bodyScroller;this.onScrolledVertically(t.scrollTop,t.clientHeight,!0),this.updateOffset(this.visibleFirstRowPos)},t.prototype.onScrolledVertically=function(t,e,i){var o=this.onScrolledImpl(t,e);return this.mixins.forEach(function(t){return t.onScrolled(i,o)}),o},t.prototype.shiftLast=function(t,e){if(e>=this.options.batchSize)return t;var i=this.context.numberOfRows;return Math.min(i-1,t+(this.options.batchSize-e))},t.prototype.shiftFirst=function(t,e,i){if(i>=this.options.batchSize||t<=0)return{first:t,firstRowPos:e};for(var o=Math.max(0,t-(this.options.batchSize-i)),n=this.context,r=n.exceptionsLookup,s=n.defaultRowHeight,a=e,l=o;l<t;++l)r.has(l)?a-=r.get(l):a-=s;return{first:o,firstRowPos:a}},t.prototype.onScrolledImpl=function(t,e){var i=this.context,o=g(t,e,i.defaultRowHeight,i.exceptions,i.numberOfRows),n=o.first,r=o.last,s=o.firstRowPos,a=this.visible;if(a.forcedFirst=n,a.forcedLast=r,n-a.first>=0&&r-a.last<=0)return d.NONE;var l=d.SOME;if(n>a.last||r<a.first)this.removeAll(),this.addAtBottom(n,r),l=d.ALL;else if(n<a.first){a.last-(r+1)>=this.options.batchSize?this.removeFromBottom(r+1,a.last):r=a.last;var h=this.shiftFirst(n,s,a.first-1-n);n=h.first,s=h.firstRowPos,this.addAtBeginning(n,a.first-1),l=d.SOME_TOP}else{n-1-a.first>=this.options.batchSize?this.removeFromBeginning(a.first,n-1):(n=a.first,s=this.visibleFirstRowPos),r=this.shiftLast(r,r-a.last+1),this.addAtBottom(a.last+1,r),l=d.SOME_BOTTOM}return a.first=n,a.last=r,this.updateOffset(s),l},t}(),S=O,E=function(){function t(t){this.rules=new Map,this.node=t.ownerDocument.createElement("style"),t.appendChild(this.node)}return t.prototype.destroy=function(){this.node.remove()},t.prototype.updateRules=function(){this.node.innerHTML=Array.from(this.rules.values()).join("\n")},t.prototype.addRule=function(t,e,i){return void 0===i&&(i=!0),this.rules.set(t,e),i&&this.updateRules(),t},t.prototype.updateRule=function(t,e,i){return void 0===i&&(i=!0),this.rules.set(t,e),i&&this.updateRules(),t},t.prototype.deleteRule=function(t,e){void 0===e&&(e=!0),this.rules.get(t)&&e&&this.updateRules()},Object.defineProperty(t.prototype,"ruleNames",{get:function(){return Array.from(this.rules.keys())},enumerable:!0,configurable:!0}),t}(),P="\n  <header>\n    <article></article>\n  </header>\n  <main>\n    <footer>&nbsp;</footer>\n    <article></article>\n  </main>";function H(t){return t.innerHTML=P,t}function A(t,e){t.dataset.id=e.id}var M=function(t){function e(e,i){var o=t.call(this,e)||this;o.id=i;var n=e.querySelector("header"),r=e.querySelector("main");return self.setTimeout(function(){var t=function(t){var e=t.ownerDocument.body;e.insertAdjacentHTML("beforeend",'\n    <div class="lineup-engine-scrollbar-tester"><div></div></div>\n  ');var i=e.lastElementChild,o=i.offsetWidth-i.clientWidth,n=i.offsetHeight-i.clientHeight;return i.remove(),{width:o,height:n}}(e).width;o.updateRule("__scollBarFix2",o.hashedId+" > header > article:last-of-type {\n        border-right: "+t+"px solid transparent;\n      }")},20),R(r,"animation",function(t){var i=n.scrollLeft,o=t.left;i!==o&&(n.scrollLeft=o),e.classList.toggle("le-shifted",t.left>0)}),o}return n(e,t),Object.defineProperty(e.prototype,"hashedId",{get:function(){return this.id.startsWith("#")?this.id:"#"+this.id},enumerable:!0,configurable:!0}),e.prototype.update=function(t,e,i,o,n){void 0===n&&(n="px");var r=void 0!==o?this.tableIds(o,!0):{header:this.id+" > header > article",body:this.id+" > main > article"};this.updateRule("__heightsRule"+r.body,r.body+" > div {\n      height: "+t+"px;\n    }",!1),this.updateColumns(e,r,i,n),this.updateRules()},e.prototype.remove=function(t){var e=this.tableIds(t,!0);this.deleteRule("__heightsRule"+e.body,!1),this.deleteRule("__widthRule"+e.body,!1);for(var i="__col"+e.body+"_",o=this.ruleNames.reduce(function(t,e){return t+(e.startsWith(i)?1:0)},0),n=0;n<o;++n)this.deleteRule(""+i+n,!1);this.updateRules()},e.prototype.tableIds=function(t,e){void 0===e&&(e=!1);var i=this.id.startsWith("#")?this.id.slice(1):this.id;return{header:(e?"#":"")+i+"_H"+t,body:(e?"#":"")+i+"_B"+t}},e.prototype.updateColumns=function(t,e,i,o){var n=this;void 0===o&&(o="px");var r="__col"+e.body+"_",s=this.ruleNames.reduce(function(t,e){return t+(e.startsWith(r)?1:0)},0),a=0,l=0;t.forEach(function(t){var s=e.body+' > div > [data-id="'+t.id+'"], '+e.header+' [data-id="'+t.id+'"] {\n        width: '+t.width+o+";\n        "+(t.frozen?"left: "+a+"px;":"")+"\n      }";if(0!==i&&t.frozen){var h=e.body+' > div > [data-id="'+t.id+'"] {\n          width: '+t.width+o+";\n          left: "+(a+i)+"px;\n        }";s=e.header+' [data-id="'+t.id+'"] {\n          width: '+t.width+o+";\n          left: "+a+"px;\n        }",n.updateRule(""+r+l++,h,!1)}t.frozen&&(a+=t.width),n.updateRule(""+r+l++,s,!1)});for(var h=l-1;h<s;++h)this.deleteRule(""+r+h,!1)},e}(E);var F=function(){function t(t,e,i){for(var o=[],n=3;n<arguments.length;n++)o[n-3]=arguments[n];var r=this;this.header=t,this.style=e,this.tableId=i,this.cellPool=[],this.visibleColumns={frozen:[],first:0,forcedFirst:0,last:-1,forcedLast:-1},this.visibleFirstColumnPos=0,this.columnAdapter=this.createColumnAdapter(),this.columnMixins=o.map(function(t){return new t(r.columnAdapter)}),this.columnFragment=t.ownerDocument.createDocumentFragment()}return t.prototype.leftShift=function(){var t=this.context,e=this.visibleColumns.frozen.reduce(function(e,i){return e+t.columns[i].width+t.column.padding(i)},0);return this.visibleFirstColumnPos-e},Object.defineProperty(t.prototype,"headerScroller",{get:function(){return this.header.parentElement},enumerable:!0,configurable:!0}),t.prototype.addColumnMixin=function(t,e){this.columnMixins.push(new t(this.columnAdapter,e))},t.prototype.createColumnAdapter=function(){var t=this,e={visible:this.visibleColumns,addAtBeginning:this.addColumnAtStart.bind(this),addAtBottom:this.addColumnAtEnd.bind(this),removeFromBeginning:this.removeColumnFromStart.bind(this),removeFromBottom:this.removeColumnFromEnd.bind(this),updateOffset:this.updateColumnOffset.bind(this),scroller:this.headerScroller,syncFrozen:this.syncFrozen.bind(this)};return Object.defineProperties(e,{visibleFirstRowPos:{get:function(){return t.visibleFirstColumnPos},enumerable:!0},context:{get:function(){return t.context.column},enumerable:!0}}),e},t.prototype.init=function(){var t=this,e=this.context;this.style.update(e.defaultRowHeight-e.padding(-1),e.columns,0,this.tableId),e.columns.forEach(function(){t.cellPool.push([])})},t.prototype.onScrolledHorizontally=function(t,e,i){var o=this.onScrolledHorizontallyImpl(t,e);return this.columnMixins.forEach(function(t){return t.onScrolled(i,o)}),o},t.prototype.removeColumnFromStart=function(t,e,i){var o=this;void 0===i&&(i=this.visibleColumns.frozen.length),this.forEachRow(function(n){o.removeCellFromStart(n,t,e,i)})},t.prototype.removeCellFromStart=function(t,e,i,o){for(var n=e;n<=i;++n){var r=0===o?t.firstElementChild:t.children[o];r.remove(),this.recycleCell(r,n)}},t.prototype.removeColumnFromEnd=function(t,e){var i=this;this.forEachRow(function(o){i.removeCellFromEnd(o,t,e)})},t.prototype.removeCellFromEnd=function(t,e,i){for(var o=i;o>=e;--o){var n=t.lastElementChild;n.remove(),this.recycleCell(n,o)}},t.prototype.removeFrozenCells=function(t,e,i){for(var o=0,n=e;o<n.length;o++){var r=n[o],s=t.children[i];s.remove(),this.recycleCell(s,r)}},t.prototype.removeFrozenColumns=function(t,e){var i=this;this.forEachRow(function(o){i.removeFrozenCells(o,t,e)})},t.prototype.removeAllColumns=function(t){var e=this;this.forEachRow(function(i){e.removeAllCells(i,t)})},t.prototype.removeAllCells=function(t,e,i){var o=this;void 0===i&&(i=this.visibleColumns.first);var n=Array.from(t.children),r=this.visibleColumns.frozen;if(t.innerHTML="",e||0===r.length)for(var s=0,a=r;s<a.length;s++){var l=a[s];this.recycleCell(n.shift(),l)}else for(var h=0,c=r;h<c.length;h++){c[h];t.appendChild(n.shift())}n.forEach(function(t,e){o.recycleCell(t,e+i)})},t.prototype.selectCell=function(t,e,i){var o=this.cellPool[e],n=i[e];if(o.length>0){var r=o.pop(),s=this.updateCell(r,t,n);return s&&s!==r&&A(s,n),s||r}var a=this.createCell(this.header.ownerDocument,t,n);return A(a,n),a},t.prototype.recycleCell=function(t,e){this.cellPool[e].push(t)},t.prototype.addColumnAtStart=function(t,e,i){var o=this;void 0===i&&(i=this.visibleColumns.frozen.length);var n=this.context.columns;this.forEachRow(function(r,s){o.addCellAtStart(r,s,t,e,i,n)})},t.prototype.addCellAtStart=function(t,e,i,o,n,r){for(var s=o;s>=i;--s){var a=this.selectCell(e,s,r);t.insertBefore(a,n>0?t.children[n]:t.firstChild)}},t.prototype.insertFrozenCells=function(t,e,i,o,n){for(var r=t.children[o],s=0,a=i;s<a.length;s++){var l=a[s],h=this.selectCell(e,l,n);r?t.insertBefore(h,r):t.appendChild(h)}},t.prototype.insertFrozenColumns=function(t,e){var i=this,o=this.context.columns;this.forEachRow(function(n,r){i.insertFrozenCells(n,r,t,e,o)})},t.prototype.addColumnAtEnd=function(t,e){var i=this,o=this.context.columns;this.forEachRow(function(n,r){i.addCellAtEnd(n,r,t,e,o)})},t.prototype.verifyRows=function(){var t=this.context.columns;this.forEachRow(function(e,i){return T(e,i,t)})},t.prototype.addCellAtEnd=function(t,e,i,o,n){for(var r=i;r<=o;++r){var s=this.selectCell(e,r,n);t.appendChild(s)}},t.prototype.updateHeaders=function(){var t=this,e=this.context.columns;Array.from(this.header.children).forEach(function(i,o){t.updateHeader(i,e[o])})},t.prototype.recreate=function(t,e){var i=this,o=this.context;this.style.update(o.defaultRowHeight-o.padding(-1),o.columns,-this.leftShift(),this.tableId),this.clearPool();for(var n=this.cellPool.length;n<o.columns.length;++n)this.cellPool.push([]);var r=this.columnFragment,s=r.ownerDocument;this.header.innerHTML="",o.columns.forEach(function(t){var e=i.createHeader(s,t);A(e,t),r.appendChild(e)}),this.header.appendChild(r);var a=g(t,e,o.column.defaultRowHeight,o.column.exceptions,o.column.numberOfRows),l=a.first,h=a.last,c=a.firstRowPos;if(this.visibleColumns.first=this.visibleColumns.forcedFirst=l,this.visibleColumns.last=this.visibleColumns.forcedLast=h,o.columns.some(function(t){return t.frozen})){var u=x([],o.columns,l).target;this.visibleColumns.frozen=u}else this.visibleColumns.frozen=[];this.updateColumnOffset(c)},t.prototype.clearPool=function(){this.cellPool.forEach(function(t){return t.splice(0,t.length)})},t.prototype.updateColumnOffset=function(t){var e=t!==this.visibleFirstColumnPos;if(this.visibleFirstColumnPos=t,e){var i=this.context;this.style.update(i.defaultRowHeight-i.padding(-1),i.columns,-this.leftShift(),this.tableId)}},t.prototype.createRow=function(t,e){var i=this.context.columns,o=this.visibleColumns;if(o.frozen.length>0)for(var n=0,r=o.frozen;n<r.length;n++){var s=r[n],a=this.selectCell(e,s,i);t.appendChild(a)}for(s=o.first;s<=o.last;++s){a=this.selectCell(e,s,i);t.appendChild(a)}},t.prototype.updateRow=function(t,e){var i=this.context.columns,o=this.visibleColumns,n=Array.from(t.children);switch(n.length){case 0:o.frozen.length>0&&this.insertFrozenCells(t,e,o.frozen,0,i),this.addCellAtEnd(t,e,o.first,o.last,i);break;case 1:var r=n[0],s=r.dataset.id,a=i.findIndex(function(t){return t.id===s});t.removeChild(r),a>=0&&this.recycleCell(r,a),o.frozen.length>0&&this.insertFrozenCells(t,e,o.frozen,0,i),this.addCellAtEnd(t,e,o.first,o.last,i);break;default:this.mergeColumns(t,e,n)}},t.prototype.mergeColumns=function(t,e,i){var o=this,n=this.context.columns,r=this.visibleColumns;t.innerHTML="";var s=new Map(i.map(function(t){return[t.dataset.id,t]})),a=function(i){var r=n[i],a=s.get(r.id);if(a){var l=o.updateCell(a,e,r);l&&l!==a&&A(l,r),t.appendChild(l||a)}else{var h=o.selectCell(e,i,n);t.appendChild(h)}};r.frozen.forEach(a);for(var l=r.first;l<=r.last;++l)a(l)},t.prototype.syncFrozen=function(t){var e=this.context.columns,i=this.visibleColumns;if(!e.some(function(t){return t.frozen}))return 0;if(0===t)return i.frozen.length>0&&(this.removeFrozenColumns(i.frozen,0),i.frozen=[]),0;var o=i.frozen.length,n=x(i.frozen,e,t),r=n.target,s=n.added,a=n.removed;return a.length>0&&this.removeFrozenColumns(a,o-a.length),s.length>0&&this.insertFrozenColumns(s,o-a.length),i.frozen=r,r.length},t.prototype.onScrolledHorizontallyImpl=function(t,e){var i=this.context.column,o=g(t,e,i.defaultRowHeight,i.exceptions,i.numberOfRows),n=o.first,r=o.last,s=o.firstRowPos,a=this.visibleColumns;if(a.forcedFirst=n,a.forcedLast=r,n-a.first>=0&&r-a.last<=0)return d.NONE;var l=d.SOME,h=this.syncFrozen(n);return n>a.last||r<a.first?(this.removeAllColumns(!1),this.addColumnAtEnd(n,r),l=d.ALL):n<a.first?(this.removeColumnFromEnd(r+1,a.last),this.addColumnAtStart(n,a.first-1,h),l=d.SOME_TOP):(this.removeColumnFromStart(a.first,n-1,h),this.addColumnAtEnd(a.last+1,r),l=d.SOME_BOTTOM),a.first=n,a.last=r,this.updateColumnOffset(s),l},t}();function T(t,e,i){var o=Array.from(t.children);if(!(o.length<=1)){var n=o.map(function(t){return i.find(function(e){return e.id===t.dataset.id})});console.assert(n.every(function(t){return Boolean(t)}),"all columns must exist",e),console.assert(n.every(function(t,e){return 0===e||t.index>=n[e-1].index}),"all columns in ascending order",e),console.assert(new Set(n).size===n.length,"unique columns",n)}}var z=function(t){function e(e,i,o){void 0===o&&(o={});var r=t.call(this,H(e).querySelector("main > article"),o)||this;r.root=e,e.classList.add("lineup-engine"),r.style=new M(r.root,i);var s=r,a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),Object.defineProperty(e.prototype,"context",{get:function(){return s.context},enumerable:!0,configurable:!0}),e.prototype.createHeader=function(t,e){return s.createHeader(t,e)},e.prototype.updateHeader=function(t,e){return s.updateHeader(t,e)},e.prototype.createCell=function(t,e,i){return s.createCell(t,e,i)},e.prototype.updateCell=function(t,e,i){return s.updateCell(t,e,i)},e.prototype.updateColumnOffset=function(e){t.prototype.updateColumnOffset.call(this,e),s.updateOffset(s.visibleFirstRowPos)},e.prototype.forEachRow=function(t){return s.forEachRow(t)},e}(F);return r.cell=new(a.bind.apply(a,[void 0,r.header,r.style,void 0].concat(o.mixins||[]))),r}return n(e,t),Object.defineProperty(e.prototype,"header",{get:function(){return this.root.querySelector("header > article")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"headerScroller",{get:function(){return this.root.querySelector("header")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"visibleColumns",{get:function(){return this.cell.visibleColumns},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"visibleFirstColumnPos",{get:function(){return this.cell.visibleFirstColumnPos},enumerable:!0,configurable:!0}),e.prototype.addColumnMixin=function(t,e){this.cell.addColumnMixin(t,e)},e.prototype.init=function(){var e=this;this.cell.init();var i=R(this.body.parentElement,this.options.async,function(t){if(!(Math.abs(i.left-t.left)<e.options.minScrollDelta&&Math.abs(i.width-t.width)<e.options.minScrollDelta)){var o=t.left>i.left;i=t,e.onScrolledHorizontally(t.left,t.width,o)}});t.prototype.init.call(this)},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.root.remove()},e.prototype.onScrolledHorizontally=function(t,e,i){return this.cell.onScrolledHorizontally(t,e,i)},e.prototype.updateHeaders=function(){this.cell.updateHeaders()},e.prototype.updateColumnWidths=function(){var t=this.context;this.style.update(t.defaultRowHeight-t.padding(-1),t.columns,-this.cell.leftShift())},e.prototype.updateSizer=function(t){var e=this.context,i=e.totalHeight,o=e.column.totalHeight;this.updateShifts(t,this.cell.leftShift()),this.bodySizer.style.transform="translate("+Math.max(0,o-1).toFixed(0)+"px, "+Math.max(0,i-1).toFixed(0)+"px)"},e.prototype.updateShifts=function(t,e){this.body.style.transform="translate("+e.toFixed(0)+"px, "+t.toFixed(0)+"px)"},e.prototype.recreate=function(e){var i=this.bodyScroller,o=i.scrollLeft;this.cell.recreate(o,i.clientWidth),t.prototype.recreate.call(this,e),i.scrollLeft=o},e.prototype.clearPool=function(){t.prototype.clearPool.call(this),this.cell.clearPool()},e.prototype.createRow=function(t,e){this.cell.createRow(t,e)},e.prototype.updateRow=function(t,e){this.cell.updateRow(t,e)},e}(O),L=i(1),_=function(){function t(t,e){return this.adapter=t,this.prefetchTimeout=-1,this.cleanupTimeout=-1,this.options={prefetchRows:20,cleanUpRows:3,delay:50},Object.assign(this.options,e),this}return t.prototype.prefetchDown=function(){this.prefetchTimeout=-1;var t=this.adapter.context,e=Math.min(this.adapter.visible.forcedLast+this.options.prefetchRows,t.numberOfRows-1);this.adapter.visible.last===e&&this.adapter.visible.last>=this.adapter.visible.forcedLast+this.options.prefetchRows||(this.adapter.addAtBottom(this.adapter.visible.last+1,e),this.adapter.visible.last=e)},t.prototype.prefetchUp=function(){if(this.prefetchTimeout=-1,!(this.adapter.visible.first<=this.adapter.visible.forcedFirst-this.options.prefetchRows)){var t=this.adapter.context,e=this.adapter.scroller,i=g(Math.max(e.scrollTop-this.options.prefetchRows*t.defaultRowHeight,0),e.clientHeight,t.defaultRowHeight,t.exceptions,t.numberOfRows),o=i.first,n=i.firstRowPos;if(o!==this.adapter.visible.first){var r=this.adapter.syncFrozen?this.adapter.syncFrozen(o):0;this.adapter.addAtBeginning(o,this.adapter.visible.first-1,r),this.adapter.visible.first=o,this.adapter.updateOffset(n)}}},t.prototype.triggerPrefetch=function(t){this.prefetchTimeout>=0&&clearTimeout(this.prefetchTimeout);var e=this.adapter.visible.last<this.adapter.visible.forcedLast+this.options.prefetchRows,i=this.adapter.visible.first>this.adapter.visible.forcedFirst-this.options.prefetchRows,o=this.adapter.visible.last===this.adapter.context.numberOfRows,n=0===this.adapter.visible.first;if((!t||e||o)&&(t||i||n)){var r=t||n?this.prefetchDown.bind(this):this.prefetchUp.bind(this);this.prefetchTimeout=self.setTimeout(r,this.options.delay)}},t.prototype.cleanUpTop=function(t){this.cleanupTimeout=-1;var e=Math.max(0,t-this.options.cleanUpRows);if(!(e<=this.adapter.visible.first)){var i=this.adapter.syncFrozen?this.adapter.syncFrozen(e):0;this.adapter.removeFromBeginning(this.adapter.visible.first,e-1,i);var o=this.adapter.context,n=(e-this.adapter.visible.first)*o.defaultRowHeight;if(o.exceptions.length>0)for(var r=this.adapter.visible.first;r<e;++r)o.exceptionsLookup.has(r)&&(n+=o.exceptionsLookup.get(r)-o.defaultRowHeight);this.adapter.visible.first=e,this.adapter.updateOffset(this.adapter.visibleFirstRowPos+n),this.prefetchDown()}},t.prototype.cleanUpBottom=function(t){this.cleanupTimeout=-1;var e=t+this.options.cleanUpRows;this.adapter.visible.last<=e||(this.adapter.removeFromBottom(e+1,this.adapter.visible.last),this.adapter.visible.last=e,this.prefetchUp())},t.prototype.triggerCleanUp=function(t,e,i){this.cleanupTimeout>=0&&clearTimeout(this.cleanupTimeout),i&&t-this.options.cleanUpRows<=this.adapter.visible.first||!i&&this.adapter.visible.last<=e+this.options.cleanUpRows||(this.cleanupTimeout=self.setTimeout(i?this.cleanUpTop.bind(this):this.cleanUpBottom.bind(this),this.options.delay,i?t:e))},t.prototype.onScrolled=function(t,e){e!==d.ALL&&this.options.cleanUpRows>0&&this.triggerCleanUp(this.adapter.visible.forcedFirst,this.adapter.visible.forcedLast,t),e!==d.NONE&&this.options.prefetchRows>0&&this.triggerPrefetch(t)},t}(),B=function(t){function e(e,i,o,r,s){void 0===s&&(s={});var a=t.call(this,i,s)||this;a.header=e,a.body=i,a.tableId=o,a.style=r;var l=a,h=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),Object.defineProperty(e.prototype,"context",{get:function(){return l.context},enumerable:!0,configurable:!0}),e.prototype.createHeader=function(t,e){return l.createHeader(t,e)},e.prototype.updateHeader=function(t,e){return l.updateHeader(t,e)},e.prototype.createCell=function(t,e,i){return l.createCell(t,e,i)},e.prototype.updateColumnOffset=function(e){t.prototype.updateColumnOffset.call(this,e),l.updateOffset(l.visibleFirstRowPos)},e.prototype.updateCell=function(t,e,i){return l.updateCell(t,e,i)},e.prototype.forEachRow=function(t){return l.forEachRow(t)},e}(F);return a.cell=new(h.bind.apply(h,[void 0,a.header,a.style,o].concat(s.mixins||[]))),a}return n(e,t),e.prototype.addColumnMixin=function(t,e){this.cell.addColumnMixin(t,e)},Object.defineProperty(e.prototype,"width",{get:function(){return this.context.column.totalHeight},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"visibleColumns",{get:function(){return this.cell.visibleColumns},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"visibleFirstColumnPos",{get:function(){return this.cell.visibleFirstColumnPos},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.context.totalHeight},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hidden",{get:function(){return this.header.classList.contains("loading")},set:function(t){this.hidden!==t&&(this.header.classList.toggle("loading",t),this.body.classList.toggle("loading",t),this.onVisibilityChanged(!t))},enumerable:!0,configurable:!0}),e.prototype.updateSizer=function(t){this.updateShifts(t,this.cell.leftShift())},e.prototype.updateShifts=function(t,e){this.body.style.transform="translate("+e.toFixed(0)+"px, "+t.toFixed(0)+"px)"},e.prototype.onVisibilityChanged=function(t){},e.prototype.hide=function(){this.hidden=!0},e.prototype.show=function(t,e,i){var o=this.hidden;this.hidden=!1,o?this.revalidate():this.onScrolledHorizontally(t,e,i)},e.prototype.init=function(){this.hide(),this.cell.init(),t.prototype.init.call(this)},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.header.remove(),this.style.remove(this.tableId)},e.prototype.onScrolledVertically=function(e,i,o){return this.hidden?d.NONE:t.prototype.onScrolledVertically.call(this,e,i,o)},e.prototype.onScrolledHorizontally=function(t,e,i){var o=this.cell.onScrolledHorizontally(t,e,i);return this.updateSizer(this.visibleFirstRowPos),o},e.prototype.updateHeaders=function(){this.cell.updateHeaders()},e.prototype.updateColumnWidths=function(){var t=this.context;this.style.update(t.defaultRowHeight-t.padding(-1),t.columns,-this.cell.leftShift(),this.tableId)},e.prototype.recreate=function(e){var i=this.bodyScroller,o=i.scrollLeft;this.cell.recreate(o,i.clientWidth),t.prototype.recreate.call(this,e),i.scrollLeft=o},e.prototype.clearPool=function(){t.prototype.clearPool.call(this),this.cell.clearPool()},e.prototype.createRow=function(t,e){this.cell.createRow(t,e)},e.prototype.updateRow=function(t,e){this.cell.updateRow(t,e)},e}(S),D=function(){function t(t,e,i){void 0===i&&(i={});var o=this;this.node=t,this.tableId=0,this.sections=[],this.options={columnPadding:0,async:w,minScrollDelta:30},Object.assign(this.options,i),t.id=e.startsWith("#")?e.slice(1):e,t.innerHTML="<header><footer>&nbsp;</footer></header><main><footer>&nbsp;</footer></main>",t.classList.add("lineup-engine","lineup-multi-engine"),this.style=new M(this.node,e);var n=R(this.main,this.options.async,function(t){if(!(Math.abs(n.left-t.left)<o.options.minScrollDelta&&Math.abs(n.width-t.width)<o.options.minScrollDelta)){var e=t.left>n.left;n=t,o.onScrolledHorizontally(t.left,t.width,e)}})}return t.prototype.update=function(){var t=this;this.onScrolledHorizontally(this.main.scrollLeft,this.main.clientWidth,!1);var e=0;this.sections.forEach(function(i){i.body.style.left=i.header.style.left=e+"px",e+=i.width+t.options.columnPadding})},t.prototype.onScrolledHorizontally=function(t,e,i){var o=this,n=0,r=t+e;this.sections.forEach(function(e){var s=n+e.width;s<t||n>r?e.hide():e.show(Math.max(0,t-n),Math.min(r-n,e.width),i),n=s+o.options.columnPadding}),this.updateOffset()},t.prototype.updateOffset=function(){var t=this,e=this.header.querySelector("footer"),i=this.main.querySelector("footer"),o=Math.max.apply(Math,[0].concat(this.sections.map(function(t){return t.height}))),n=this.sections.reduce(function(e,i){return e+i.width+t.options.columnPadding},0);e.style.transform="translate("+n+"px,0)",i.style.transform="translate("+n+"px, "+o+"px)"},t.prototype.destroy=function(){this.sections.forEach(function(t){return t.destroy()}),this.node.remove()},Object.defineProperty(t.prototype,"doc",{get:function(){return this.node.ownerDocument},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"header",{get:function(){return this.node.querySelector("header")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"main",{get:function(){return this.node.querySelector("main")},enumerable:!0,configurable:!0}),t.prototype.pushTable=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];var o=this.doc.createElement("article"),n=this.doc.createElement("article"),r="T"+this.tableId++,s=this.style.tableIds(r);o.id=s.header,n.id=s.body,this.header.insertBefore(o,this.header.lastElementChild),this.main.appendChild(n);var a=t.apply(void 0,[o,n,r,this.style].concat(e));return a.init(),this.sections.push(a),this.update(),a},t.prototype.pushSeparator=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];var o=this.doc.createElement("section"),n=this.doc.createElement("section");this.header.insertBefore(o,this.header.lastElementChild),this.main.appendChild(n);var r=t.apply(void 0,[o,n,this.style].concat(e));return r.init(),this.sections.push(r),this.update(),r},t.prototype.remove=function(t){var e=this.sections.indexOf(t);return!(e<0)&&(this.sections.splice(e,1),t.destroy(),this.update(),!0)},t.prototype.clear=function(){this.sections.splice(0,this.sections.length).forEach(function(t){return t.destroy()}),this.update()},t.prototype.widthChanged=function(){this.update()},t}();i.d(e,"version",function(){return I}),i.d(e,"ACellRenderer",function(){return z}),i.d(e,"ARowRenderer",function(){return O}),i.d(e,"uniformContext",function(){return m}),i.d(e,"nonUniformContext",function(){return y}),i.d(e,"randomContext",function(){return v}),i.d(e,"range",function(){return g}),i.d(e,"frozenDelta",function(){return b}),i.d(e,"updateFrozen",function(){return x}),i.d(e,"ABORTED",function(){return r}),i.d(e,"isAbortAble",function(){return a}),i.d(e,"abortAble",function(){return s}),i.d(e,"IColumn",function(){return L.IColumn}),i.d(e,"GridStyleManager",function(){return M}),i.d(e,"setColumn",function(){return A}),i.d(e,"TEMPLATE",function(){return P}),i.d(e,"setTemplate",function(){return H}),i.d(e,"StyleManager",function(){return E}),i.d(e,"IMixin",function(){}),i.d(e,"IMixinAdapter",function(){}),i.d(e,"IMixinClass",function(){}),i.d(e,"EScrollResult",function(){return d}),i.d(e,"PrefetchMixin",function(){return _}),i.d(e,"ITableCellRenderContext",function(){}),i.d(e,"ACellTableSection",function(){return B}),i.d(e,"IMultiTableRowRendererOptions",function(){}),i.d(e,"ISeparatorFactory",function(){}),i.d(e,"ITableFactory",function(){}),i.d(e,"ITableSection",function(){}),i.d(e,"MultiTableRowRenderer",function(){return D}),i.d(e,"KeyFinder",function(){return h}),i.d(e,"EAnimationMode",function(){return l}),i.d(e,"noAnimationChange",function(){return u}),i.d(e,"defaultPhases",function(){return f});var I="1.1.2"}])});